import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Mail } from "lucide-react";
import { motion } from "framer-motion";
import Script from "next/script";
import { useState } from "react";

export default function AIHustleHub() {
  const [email, setEmail] = useState("");
  const [downloadLink, setDownloadLink] = useState("");

  const handlePayment = () => {
    if (typeof window !== "undefined") {
      window.FlutterwaveCheckout({
        public_key: "FLWPUBK_TEST-xxxxxxxxxxxxxxxxxxxxx-X",
        tx_ref: "AIHUB_" + Date.now(),
        amount: 5,
        currency: "USD",
        payment_options: "card, mobilemoneyuganda",
        customer: {
          email: email || "user@example.com",
          name: "Test User",
        },
        callback: function (data) {
          console.log(data);
          alert("Payment successful!");
          setDownloadLink("/downloads/pro-starter-guide.pdf");
        },
        onclose: function () {
          alert("Payment cancelled");
        },
        customizations: {
          title: "AI Hustle Hub",
          description: "Membership Subscription",
          logo: "https://aihustlehub.com/logo.png",
        },
      });
    }
  };

  const handleSendFreeGuide = () => {
    if (!email) {
      alert("Please enter your email");
      return;
    }
    setDownloadLink("/downloads/free-starter-guide.pdf");
    alert("Check your email for the free guide! (Demo)");
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white p-4">
      <Script src="https://checkout.flutterwave.com/v3.js" strategy="beforeInteractive" />

      <header className="text-center py-10">
        <motion.h1 initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.6 }} className="text-4xl md:text-6xl font-bold">
          AI Hustle Hub
        </motion.h1>
        <p className="mt-4 text-lg md:text-xl text-gray-300">
          Turn AI tools into daily income â€“ even with zero tech skills.
        </p>
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.8 }} className="mt-6 space-x-4">
          <Button className="text-lg px-6 py-3 rounded-2xl shadow-lg" onClick={handlePayment}>
            Subscribe Now ($5)
          </Button>
          <Button variant="outline" className="text-lg px-6 py-3 rounded-2xl border-gray-500 text-gray-300">
            Learn More
          </Button>
        </motion.div>
        {downloadLink && (
          <div className="mt-6">
            <a href={downloadLink} target="_blank" rel="noopener noreferrer" className="underline text-green-400">
              Download Your Guide
            </a>
          </div>
        )}
      </header>

      <main className="grid md:grid-cols-3 gap-6 mt-10">
        <Card className="bg-gray-800 border border-gray-700">
          <CardContent className="p-6">
            <h2 className="text-xl font-semibold mb-2">Weekly AI Guides</h2>
            <p>Step-by-step instructions to earn with AI tools.</p>
          </CardContent>
        </Card>

        <Card className="bg-gray-800 border border-gray-700">
          <CardContent className="p-6">
            <h2 className="text-xl font-semibold mb-2">Downloadable Templates</h2>
            <p>Pre-made ChatGPT prompts, Canva templates, and more.</p>
          </CardContent>
        </Card>

        <Card className="bg-gray-800 border border-gray-700">
          <CardContent className="p-6">
            <h2 className="text-xl font-semibold mb-2">Community Access</h2>
            <p>Private Telegram support group for members only.</p>
          </CardContent>
        </Card>
      </main>

      <section className="mt-16 text-center max-w-xl mx-auto">
        <h3 className="text-2xl font-bold mb-4">Get a Free Starter Guide</h3>
        <p className="text-gray-300 mb-6">Enter your email and get instant access to a free PDF on how to start earning with AI tools in 24 hours.</p>
        <div className="flex items-center gap-2 justify-center">
          <Input type="email" placeholder="Your email" className="max-w-sm bg-gray-700 border-none text-white" value={email} onChange={(e) => setEmail(e.target.value)} />
          <Button className="flex gap-2 items-center" onClick={handleSendFreeGuide}>
            <Mail className="w-4 h-4" /> Send it!
          </Button>
        </div>
      </section>

      <footer className="mt-24 text-center text-sm text-gray-500">
        &copy; 2025 AI Hustle Hub. All rights reserved.
      </footer>
    </div>
  );
}
